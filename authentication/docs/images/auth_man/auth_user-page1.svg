<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="320px" preserveAspectRatio="none" style="width:691px;height:320px;" version="1.1" viewBox="0 0 691 320" width="691px" zoomAndPan="magnify"><defs><filter height="300%" id="f1gpgb019zooau" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="90" x="297.25" y="30.6855">ユーザ認証</text><rect fill="#FFFFFF" filter="url(#f1gpgb019zooau)" height="57.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="577.5" y="158.6016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="37" x2="37" y1="126.25" y2="234.9531"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="260.5" x2="260.5" y1="126.25" y2="234.9531"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="375" x2="375" y1="126.25" y2="234.9531"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="454" x2="454" y1="126.25" y2="234.9531"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="582" x2="582" y1="126.25" y2="234.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="20" y="123.1738">User</text><ellipse cx="37.5" cy="51.6406" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M37.5,59.6406 L37.5,86.6406 M24.5,67.6406 L50.5,67.6406 M37.5,86.6406 L24.5,101.6406 M37.5,86.6406 L50.5,101.6406 " fill="none" filter="url(#f1gpgb019zooau)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="20" y="248.4863">User</text><ellipse cx="37.5" cy="261.5625" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M37.5,269.5625 L37.5,296.5625 M24.5,277.5625 L50.5,277.5625 M37.5,296.5625 L24.5,311.5625 M37.5,296.5625 L50.5,311.5625 " fill="none" filter="url(#f1gpgb019zooau)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="218.5" y="123.1738">Ogawayama</text><path d="M240,80.6406 L240,104.6406 M240,92.6406 L257,92.6406 " fill="none" filter="url(#f1gpgb019zooau)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="269" cy="92.6406" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="218.5" y="248.4863">Ogawayama</text><path d="M240,255.5625 L240,279.5625 M240,267.5625 L257,267.5625 " fill="none" filter="url(#f1gpgb019zooau)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="269" cy="267.5625" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="354" y="123.1738">OLTP</text><ellipse cx="375.5" cy="92.6406" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="371.5,80.6406,377.5,75.6406,375.5,80.6406,377.5,85.6406,371.5,80.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="354" y="248.4863">OLTP</text><ellipse cx="375.5" cy="267.5625" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="371.5,255.5625,377.5,250.5625,375.5,255.5625,377.5,260.5625,371.5,255.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="409" y="123.1738">AuthManager</text><ellipse cx="454.5" cy="92.6406" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="450.5,80.6406,456.5,75.6406,454.5,80.6406,456.5,85.6406,450.5,80.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="409" y="248.4863">AuthManager</text><ellipse cx="454.5" cy="267.5625" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="450.5,255.5625,456.5,250.5625,454.5,255.5625,456.5,260.5625,450.5,255.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="541" y="123.1738">PostgreSQL</text><path d="M564.5,72.6406 C564.5,62.6406 582.5,62.6406 582.5,62.6406 C582.5,62.6406 600.5,62.6406 600.5,72.6406 L600.5,98.6406 C600.5,108.6406 582.5,108.6406 582.5,108.6406 C582.5,108.6406 564.5,108.6406 564.5,98.6406 L564.5,72.6406 " fill="#FEFECE" filter="url(#f1gpgb019zooau)" style="stroke:#000000;stroke-width:1.5;"/><path d="M564.5,72.6406 C564.5,82.6406 582.5,82.6406 582.5,82.6406 C582.5,82.6406 600.5,82.6406 600.5,72.6406 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="541" y="248.4863">PostgreSQL</text><path d="M564.5,261.5625 C564.5,251.5625 582.5,251.5625 582.5,251.5625 C582.5,251.5625 600.5,251.5625 600.5,261.5625 L600.5,287.5625 C600.5,297.5625 582.5,297.5625 582.5,297.5625 C582.5,297.5625 564.5,297.5625 564.5,287.5625 L564.5,261.5625 " fill="#FEFECE" filter="url(#f1gpgb019zooau)" style="stroke:#000000;stroke-width:1.5;"/><path d="M564.5,261.5625 C564.5,271.5625 582.5,271.5625 582.5,271.5625 C582.5,271.5625 600.5,271.5625 600.5,261.5625 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#f1gpgb019zooau)" height="57.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="577.5" y="158.6016"/><polygon fill="#A80036" points="565.5,154.6016,575.5,158.6016,565.5,162.6016,569.5,158.6016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="37.5" x2="571.5" y1="158.6016" y2="158.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="44.5" y="153.7451">ユーザ（ロール）作成要求</text><line style="stroke:#A80036;stroke-width:1.0;" x1="587.5" x2="629.5" y1="188.9531" y2="188.9531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="629.5" x2="629.5" y1="188.9531" y2="201.9531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="588.5" x2="629.5" y1="201.9531" y2="201.9531"/><polygon fill="#A80036" points="598.5,197.9531,588.5,201.9531,598.5,205.9531,594.5,201.9531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="594.5" y="184.0967">ロール作成</text><polygon fill="#A80036" points="48.5,211.9531,38.5,215.9531,48.5,219.9531,44.5,215.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42.5" x2="581.5" y1="215.9531" y2="215.9531"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="0" x2="684.5" y1="223.9531" y2="223.9531"/><!--MD5=[a1eaaad10668f0c4bd5b41748651545b]
@startuml auth_user

title ユーザ認証

actor User as user
boundary Ogawayama as ogawayama
control OLTP as oltp
control AuthManager as auth_man
database PostgreSQL as pg

user -> pg : ユーザ（ロール）作成要求
activate pg
  pg -> pg : ロール作成
  pg -> user 
deactivate pg

newpage バッチ実行

user -> ogawayama : ユーザ認証要求 & ジョブ実行要求
ogawayama -> auth_man : ユーザ認証要求
auth_man -> pg : ログイン処理要求
activate pg
  pg -> pg : ログイン処理
  pg -> auth_man : 結果
deactivate pg

auth_man -> ogawayama : ユーザ認証結果

alt 認証失敗
  ogawayama -> user : ユーザ認証失敗通知
end

ogawayama -> oltp : ジョブ実行依頼
oltp -> oltp : ジョブ実行
oltp -> ogawayama : 実行結果
ogawayama -> user : ジョブ実行結果

@enduml

PlantUML version 1.2021.01(Tue Feb 02 16:55:08 JST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>