<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="906px" preserveAspectRatio="none" style="width:685px;height:906px;" version="1.1" viewBox="0 0 685 906" width="685px" zoomAndPan="magnify"><defs><filter height="300%" id="f1uichtughb2th" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="126" x="276.25" y="30.6855">ユーザ認証機能</text><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="445.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="255.5" y="365.0078"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="103.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="375.5" y="615.4688"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="380.5" y="653.8203"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="164.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="464.5" y="395.3594"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="87.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="571.5" y="202.9531"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576.5" y="241.3047"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="103.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="571.5" y="425.7109"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576.5" y="464.0625"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="228.9453" style="stroke:#000000;stroke-width:2.0;" width="464.5" x="10" y="574.7656"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="464.5" x="10" y="757.5234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="37" x2="37" y1="126.25" y2="820.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="260" x2="260" y1="126.25" y2="820.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="380" x2="380" y1="126.25" y2="820.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="469" x2="469" y1="126.25" y2="820.7109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="576" x2="576" y1="126.25" y2="820.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="20" y="123.1738">User</text><ellipse cx="37.5" cy="51.6406" fill="#FEFECE" filter="url(#f1uichtughb2th)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M37.5,59.6406 L37.5,86.6406 M24.5,67.6406 L50.5,67.6406 M37.5,86.6406 L24.5,101.6406 M37.5,86.6406 L50.5,101.6406 " fill="none" filter="url(#f1uichtughb2th)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="20" y="834.2441">User</text><ellipse cx="37.5" cy="847.3203" fill="#FEFECE" filter="url(#f1uichtughb2th)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M37.5,855.3203 L37.5,882.3203 M24.5,863.3203 L50.5,863.3203 M37.5,882.3203 L24.5,897.3203 M37.5,882.3203 L50.5,897.3203 " fill="none" filter="url(#f1uichtughb2th)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="229" y="123.1738">OLTP I/F</text><path d="M240,80.6406 L240,104.6406 M240,92.6406 L257,92.6406 " fill="none" filter="url(#f1uichtughb2th)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="269" cy="92.6406" fill="#FEFECE" filter="url(#f1uichtughb2th)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="229" y="834.2441">OLTP I/F</text><path d="M240,841.3203 L240,865.3203 M240,853.3203 L257,853.3203 " fill="none" filter="url(#f1uichtughb2th)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="269" cy="853.3203" fill="#FEFECE" filter="url(#f1uichtughb2th)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="359" y="123.1738">OLTP</text><ellipse cx="380.5" cy="92.6406" fill="#FEFECE" filter="url(#f1uichtughb2th)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="376.5,80.6406,382.5,75.6406,380.5,80.6406,382.5,85.6406,376.5,80.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="359" y="834.2441">OLTP</text><ellipse cx="380.5" cy="853.3203" fill="#FEFECE" filter="url(#f1uichtughb2th)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="376.5,841.3203,382.5,836.3203,380.5,841.3203,382.5,846.3203,376.5,841.3203" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="424" y="123.1738">AuthManager</text><ellipse cx="469.5" cy="92.6406" fill="#FEFECE" filter="url(#f1uichtughb2th)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="465.5,80.6406,471.5,75.6406,469.5,80.6406,471.5,85.6406,465.5,80.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="424" y="834.2441">AuthManager</text><ellipse cx="469.5" cy="853.3203" fill="#FEFECE" filter="url(#f1uichtughb2th)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="465.5,841.3203,471.5,836.3203,469.5,841.3203,471.5,846.3203,465.5,841.3203" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="535" y="123.1738">PostgreSQL</text><path d="M558.5,72.6406 C558.5,62.6406 576.5,62.6406 576.5,62.6406 C576.5,62.6406 594.5,62.6406 594.5,72.6406 L594.5,98.6406 C594.5,108.6406 576.5,108.6406 576.5,108.6406 C576.5,108.6406 558.5,108.6406 558.5,98.6406 L558.5,72.6406 " fill="#FEFECE" filter="url(#f1uichtughb2th)" style="stroke:#000000;stroke-width:1.5;"/><path d="M558.5,72.6406 C558.5,82.6406 576.5,82.6406 576.5,82.6406 C576.5,82.6406 594.5,82.6406 594.5,72.6406 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="535" y="834.2441">PostgreSQL</text><path d="M558.5,847.3203 C558.5,837.3203 576.5,837.3203 576.5,837.3203 C576.5,837.3203 594.5,837.3203 594.5,847.3203 L594.5,873.3203 C594.5,883.3203 576.5,883.3203 576.5,883.3203 C576.5,883.3203 558.5,883.3203 558.5,873.3203 L558.5,847.3203 " fill="#FEFECE" filter="url(#f1uichtughb2th)" style="stroke:#000000;stroke-width:1.5;"/><path d="M558.5,847.3203 C558.5,857.3203 576.5,857.3203 576.5,857.3203 C576.5,857.3203 594.5,857.3203 594.5,847.3203 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="445.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="255.5" y="365.0078"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="103.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="375.5" y="615.4688"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="380.5" y="653.8203"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="164.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="464.5" y="395.3594"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="87.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="571.5" y="202.9531"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576.5" y="241.3047"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="103.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="571.5" y="425.7109"/><rect fill="#FFFFFF" filter="url(#f1uichtughb2th)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576.5" y="464.0625"/><rect fill="#EEEEEE" filter="url(#f1uichtughb2th)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="678.5" x="0" y="157.4258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="678.5" y1="157.4258" y2="157.4258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="678.5" y1="160.4258" y2="160.4258"/><rect fill="#EEEEEE" filter="url(#f1uichtughb2th)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="83" x="297.75" y="146.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65" x="303.75" y="163.7451">ユーザ登録</text><polygon fill="#A80036" points="559.5,198.9531,569.5,202.9531,559.5,206.9531,563.5,202.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="37.5" x2="565.5" y1="202.9531" y2="202.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="44.5" y="198.0967">ユーザ（ロール）作成要求</text><line style="stroke:#A80036;stroke-width:1.0;" x1="586.5" x2="628.5" y1="233.3047" y2="233.3047"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628.5" x2="628.5" y1="233.3047" y2="246.3047"/><line style="stroke:#A80036;stroke-width:1.0;" x1="587.5" x2="628.5" y1="246.3047" y2="246.3047"/><polygon fill="#A80036" points="597.5,242.3047,587.5,246.3047,597.5,250.3047,593.5,246.3047" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="593.5" y="228.4482">ロール作成</text><polygon fill="#A80036" points="48.5,286.3047,38.5,290.3047,48.5,294.3047,44.5,290.3047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42.5" x2="575.5" y1="290.3047" y2="290.3047"/><rect fill="#EEEEEE" filter="url(#f1uichtughb2th)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="678.5" x="0" y="319.4805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="678.5" y1="319.4805" y2="319.4805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="678.5" y1="322.4805" y2="322.4805"/><rect fill="#EEEEEE" filter="url(#f1uichtughb2th)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="122" x="278.25" y="308.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104" x="284.25" y="325.7998">バッチジョブ実行</text><polygon fill="#A80036" points="243.5,361.0078,253.5,365.0078,243.5,369.0078,247.5,365.0078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="37.5" x2="249.5" y1="365.0078" y2="365.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="44.5" y="360.1514">ユーザ認証要求 &amp; ジョブ実行要求</text><polygon fill="#A80036" points="452.5,391.3594,462.5,395.3594,452.5,399.3594,456.5,395.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="265.5" x2="458.5" y1="395.3594" y2="395.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="272.5" y="390.5029">ユーザ認証要求</text><polygon fill="#A80036" points="559.5,421.7109,569.5,425.7109,559.5,429.7109,563.5,425.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="474.5" x2="565.5" y1="425.7109" y2="425.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="481.5" y="420.8545">ログイン要求</text><line style="stroke:#A80036;stroke-width:1.0;" x1="586.5" x2="628.5" y1="456.0625" y2="456.0625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628.5" x2="628.5" y1="456.0625" y2="469.0625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="587.5" x2="628.5" y1="469.0625" y2="469.0625"/><polygon fill="#A80036" points="597.5,465.0625,587.5,469.0625,597.5,473.0625,593.5,469.0625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="593.5" y="451.2061">ログイン処理</text><polygon fill="#A80036" points="485.5,525.4141,475.5,529.4141,485.5,533.4141,481.5,529.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="479.5" x2="575.5" y1="529.4141" y2="529.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="491.5" y="524.5576">処理結果</text><polygon fill="#A80036" points="276.5,555.7656,266.5,559.7656,276.5,563.7656,272.5,559.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="270.5" x2="468.5" y1="559.7656" y2="559.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="282.5" y="554.9092">ユーザ認証結果</text><path d="M10,574.7656 L71,574.7656 L71,582.7656 L61,592.7656 L10,592.7656 L10,574.7656 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="228.9453" style="stroke:#000000;stroke-width:2.0;" width="464.5" x="10" y="574.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="589.2607">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52" x="86" y="588.1846">[認証成功]</text><polygon fill="#A80036" points="363.5,611.4688,373.5,615.4688,363.5,619.4688,367.5,615.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="265.5" x2="369.5" y1="615.4688" y2="615.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="272.5" y="610.6123">ジョブ実行依頼</text><line style="stroke:#A80036;stroke-width:1.0;" x1="390.5" x2="432.5" y1="645.8203" y2="645.8203"/><line style="stroke:#A80036;stroke-width:1.0;" x1="432.5" x2="432.5" y1="645.8203" y2="658.8203"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391.5" x2="432.5" y1="658.8203" y2="658.8203"/><polygon fill="#A80036" points="401.5,654.8203,391.5,658.8203,401.5,662.8203,397.5,658.8203" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="397.5" y="640.9639">ジョブ実行</text><polygon fill="#A80036" points="276.5,715.1719,266.5,719.1719,276.5,723.1719,272.5,719.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="270.5" x2="379.5" y1="719.1719" y2="719.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="282.5" y="714.3154">実行結果</text><polygon fill="#A80036" points="48.5,745.5234,38.5,749.5234,48.5,753.5234,44.5,749.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42.5" x2="254.5" y1="749.5234" y2="749.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="54.5" y="744.667">ジョブ実行結果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="474.5" y1="758.5234" y2="758.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52" x="15" y="769.9424">[認証失敗]</text><polygon fill="#A80036" points="48.5,791.7109,38.5,795.7109,48.5,799.7109,44.5,795.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42.5" x2="254.5" y1="795.7109" y2="795.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="54.5" y="790.8545">ユーザ認証失敗通知</text><!--MD5=[ba8f85fe4a70d936327ae177ff38eb9b]
@startuml auth_user

title ユーザ認証機能

actor User as user
boundary "OLTP I/F" as ogawayama
control OLTP as oltp
control AuthManager as auth_man
database PostgreSQL as pg

== ユーザ登録 ==

user -> pg : ユーザ（ロール）作成要求
activate pg
  pg -> pg : ロール作成
  activate pg
  deactivate pg
  pg -> user 
deactivate pg

== バッチジョブ実行 ==

user -> ogawayama : ユーザ認証要求 & ジョブ実行要求
activate ogawayama
  ogawayama -> auth_man : ユーザ認証要求
  activate auth_man
    auth_man -> pg : ログイン要求
    activate pg
      pg -> pg : ログイン処理
      activate pg
      deactivate pg
      pg -> auth_man : 処理結果
    deactivate pg
    auth_man -> ogawayama : ユーザ認証結果
  deactivate auth_man

alt 認証成功
  ogawayama -> oltp : ジョブ実行依頼
  activate oltp
    oltp -> oltp : ジョブ実行
    activate oltp
    deactivate oltp
    oltp -> ogawayama : 実行結果
  deactivate oltp
  ogawayama -> user : ジョブ実行結果
else 認証失敗
  ogawayama -> user : ユーザ認証失敗通知
end
deactivate ogawayama

@enduml

PlantUML version 1.2021.01(Tue Feb 02 16:55:08 JST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>