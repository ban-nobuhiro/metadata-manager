<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="626px" preserveAspectRatio="none" style="width:691px;height:626px;" version="1.1" viewBox="0 0 691 626" width="691px" zoomAndPan="magnify"><defs><filter height="300%" id="f1gpgb019zooau" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="90" x="297.25" y="30.6855">バッチ実行</text><rect fill="#FFFFFF" filter="url(#f1gpgb019zooau)" height="73.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="577.5" y="221.3047"/><rect fill="#FFFFFF" filter="url(#f1gpgb019zooau)" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="302.5" x="10" y="340.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="37" x2="37" y1="126.25" y2="540.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="260.5" x2="260.5" y1="126.25" y2="540.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="375" x2="375" y1="126.25" y2="540.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="454" x2="454" y1="126.25" y2="540.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="582" x2="582" y1="126.25" y2="540.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="20" y="123.1738">User</text><ellipse cx="37.5" cy="51.6406" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M37.5,59.6406 L37.5,86.6406 M24.5,67.6406 L50.5,67.6406 M37.5,86.6406 L24.5,101.6406 M37.5,86.6406 L50.5,101.6406 " fill="none" filter="url(#f1gpgb019zooau)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="20" y="554.002">User</text><ellipse cx="37.5" cy="567.0781" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M37.5,575.0781 L37.5,602.0781 M24.5,583.0781 L50.5,583.0781 M37.5,602.0781 L24.5,617.0781 M37.5,602.0781 L50.5,617.0781 " fill="none" filter="url(#f1gpgb019zooau)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="218.5" y="123.1738">Ogawayama</text><path d="M240,80.6406 L240,104.6406 M240,92.6406 L257,92.6406 " fill="none" filter="url(#f1gpgb019zooau)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="269" cy="92.6406" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="218.5" y="554.002">Ogawayama</text><path d="M240,561.0781 L240,585.0781 M240,573.0781 L257,573.0781 " fill="none" filter="url(#f1gpgb019zooau)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="269" cy="573.0781" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="354" y="123.1738">OLTP</text><ellipse cx="375.5" cy="92.6406" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="371.5,80.6406,377.5,75.6406,375.5,80.6406,377.5,85.6406,371.5,80.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="354" y="554.002">OLTP</text><ellipse cx="375.5" cy="573.0781" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="371.5,561.0781,377.5,556.0781,375.5,561.0781,377.5,566.0781,371.5,561.0781" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="409" y="123.1738">AuthManager</text><ellipse cx="454.5" cy="92.6406" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="450.5,80.6406,456.5,75.6406,454.5,80.6406,456.5,85.6406,450.5,80.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="409" y="554.002">AuthManager</text><ellipse cx="454.5" cy="573.0781" fill="#FEFECE" filter="url(#f1gpgb019zooau)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="450.5,561.0781,456.5,556.0781,454.5,561.0781,456.5,566.0781,450.5,561.0781" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="541" y="123.1738">PostgreSQL</text><path d="M564.5,72.6406 C564.5,62.6406 582.5,62.6406 582.5,62.6406 C582.5,62.6406 600.5,62.6406 600.5,72.6406 L600.5,98.6406 C600.5,108.6406 582.5,108.6406 582.5,108.6406 C582.5,108.6406 564.5,108.6406 564.5,98.6406 L564.5,72.6406 " fill="#FEFECE" filter="url(#f1gpgb019zooau)" style="stroke:#000000;stroke-width:1.5;"/><path d="M564.5,72.6406 C564.5,82.6406 582.5,82.6406 582.5,82.6406 C582.5,82.6406 600.5,82.6406 600.5,72.6406 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="541" y="554.002">PostgreSQL</text><path d="M564.5,567.0781 C564.5,557.0781 582.5,557.0781 582.5,557.0781 C582.5,557.0781 600.5,557.0781 600.5,567.0781 L600.5,593.0781 C600.5,603.0781 582.5,603.0781 582.5,603.0781 C582.5,603.0781 564.5,603.0781 564.5,593.0781 L564.5,567.0781 " fill="#FEFECE" filter="url(#f1gpgb019zooau)" style="stroke:#000000;stroke-width:1.5;"/><path d="M564.5,567.0781 C564.5,577.0781 582.5,577.0781 582.5,577.0781 C582.5,577.0781 600.5,577.0781 600.5,567.0781 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#f1gpgb019zooau)" height="73.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="577.5" y="221.3047"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="0" x2="684.5" y1="137.25" y2="137.25"/><polygon fill="#A80036" points="248.5,156.6016,258.5,160.6016,248.5,164.6016,252.5,160.6016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="37.5" x2="254.5" y1="160.6016" y2="160.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="44.5" y="155.7451">ユーザ認証要求 &amp; ジョブ実行要求</text><polygon fill="#A80036" points="442.5,186.9531,452.5,190.9531,442.5,194.9531,446.5,190.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="260.5" x2="448.5" y1="190.9531" y2="190.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="267.5" y="186.0967">ユーザ認証要求</text><polygon fill="#A80036" points="565.5,217.3047,575.5,221.3047,565.5,225.3047,569.5,221.3047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="454.5" x2="571.5" y1="221.3047" y2="221.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="461.5" y="216.4482">ログイン処理要求</text><line style="stroke:#A80036;stroke-width:1.0;" x1="587.5" x2="629.5" y1="251.6563" y2="251.6563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="629.5" x2="629.5" y1="251.6563" y2="264.6563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="588.5" x2="629.5" y1="264.6563" y2="264.6563"/><polygon fill="#A80036" points="598.5,260.6563,588.5,264.6563,598.5,268.6563,594.5,264.6563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="594.5" y="246.7998">ログイン処理</text><polygon fill="#A80036" points="465.5,291.0078,455.5,295.0078,465.5,299.0078,461.5,295.0078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="459.5" x2="581.5" y1="295.0078" y2="295.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="471.5" y="290.1514">結果</text><polygon fill="#A80036" points="271.5,321.3594,261.5,325.3594,271.5,329.3594,267.5,325.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="265.5" x2="453.5" y1="325.3594" y2="325.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="277.5" y="320.5029">ユーザ認証結果</text><path d="M10,340.3594 L71,340.3594 L71,348.3594 L61,358.3594 L10,358.3594 L10,340.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="302.5" x="10" y="340.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="354.8545">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52" x="86" y="353.7783">[認証失敗]</text><polygon fill="#A80036" points="48.5,377.0625,38.5,381.0625,48.5,385.0625,44.5,381.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42.5" x2="259.5" y1="381.0625" y2="381.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="54.5" y="376.2061">ユーザ認証失敗通知</text><polygon fill="#A80036" points="363.5,414.4141,373.5,418.4141,363.5,422.4141,367.5,418.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="260.5" x2="369.5" y1="418.4141" y2="418.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="267.5" y="413.5576">ジョブ実行依頼</text><line style="stroke:#A80036;stroke-width:1.0;" x1="375.5" x2="417.5" y1="448.7656" y2="448.7656"/><line style="stroke:#A80036;stroke-width:1.0;" x1="417.5" x2="417.5" y1="448.7656" y2="461.7656"/><line style="stroke:#A80036;stroke-width:1.0;" x1="376.5" x2="417.5" y1="461.7656" y2="461.7656"/><polygon fill="#A80036" points="386.5,457.7656,376.5,461.7656,386.5,465.7656,382.5,461.7656" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="382.5" y="443.9092">ジョブ実行</text><polygon fill="#A80036" points="271.5,488.1172,261.5,492.1172,271.5,496.1172,267.5,492.1172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="265.5" x2="374.5" y1="492.1172" y2="492.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="277.5" y="487.2607">実行結果</text><polygon fill="#A80036" points="48.5,518.4688,38.5,522.4688,48.5,526.4688,44.5,522.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42.5" x2="259.5" y1="522.4688" y2="522.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="54.5" y="517.6123">ジョブ実行結果</text><!--MD5=[a1eaaad10668f0c4bd5b41748651545b]
@startuml auth_user

title ユーザ認証

actor User as user
boundary Ogawayama as ogawayama
control OLTP as oltp
control AuthManager as auth_man
database PostgreSQL as pg

user -> pg : ユーザ（ロール）作成要求
activate pg
  pg -> pg : ロール作成
  pg -> user 
deactivate pg

newpage バッチ実行

user -> ogawayama : ユーザ認証要求 & ジョブ実行要求
ogawayama -> auth_man : ユーザ認証要求
auth_man -> pg : ログイン処理要求
activate pg
  pg -> pg : ログイン処理
  pg -> auth_man : 結果
deactivate pg

auth_man -> ogawayama : ユーザ認証結果

alt 認証失敗
  ogawayama -> user : ユーザ認証失敗通知
end

ogawayama -> oltp : ジョブ実行依頼
oltp -> oltp : ジョブ実行
oltp -> ogawayama : 実行結果
ogawayama -> user : ジョブ実行結果

@enduml

PlantUML version 1.2021.01(Tue Feb 02 16:55:08 JST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>